#include <dt-bindings/zmk/keys.h>

#undef COMBO_HOOK
#define COMBO_HOOK global-quick-tap-ms = <150>;

#define COMBO_TERM_FAST 18
#define COMBO_TERM_SLOW 30

/ {
    combos {
        compatible = "zmk,combos";

        combo_mouse {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&smart_mouse>;
            key-positions = <LT3 LT1>;
            COMBO_HOOK
        };
        combo_esc {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&kp ESC>;
            key-positions = <LT3 LT2>;
            COMBO_HOOK
        };
        combo_cut {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&kp LG(X)>;
            key-positions = <LB3 LB1>;
            COMBO_HOOK
        };
        combo_copy {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&kp LC(INS)>;
            key-positions = <LB3 LB2>;
            COMBO_HOOK
        };
        combo_paste {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&kp LS(INS)>;
            key-positions = <LB2 LB1>;
            COMBO_HOOK
        };
        combo_return {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&kp RET>;
            key-positions = <LT2 LT1>;
            COMBO_HOOK
        };

        // left hand symbols
        combo_exclamation {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp EXCL>;
            key-positions = <LT4 LM4>;
            COMBO_HOOK
        };
        combo_at {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp AT>;
            key-positions = <LT3 LM3>;
            COMBO_HOOK
        };
        combo_hash {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp HASH>;
            key-positions = <LT2 LM2>;
            COMBO_HOOK
        };
        combo_dollar {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp DOLLAR>;
            key-positions = <LT1 LM1>;
            COMBO_HOOK
        };
        combo_percent {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp PERCENT>;
            key-positions = <LT0 LM0>;
            COMBO_HOOK
        };

        combo_grave {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp GRAVE>;
            key-positions = <LM3 LB3>;
            COMBO_HOOK
        };
        combo_backslash {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp BACKSLASH>;
            key-positions = <LM2 LB2>;
            COMBO_HOOK
        };
        combo_equal {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp EQUAL>;
            key-positions = <LM1 LB1>;
            COMBO_HOOK
        };
        combo_tilde {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp TILDE>;
            key-positions = <LM0 LB0>;
            COMBO_HOOK
        };

        // right hand symbols
        combo_caret {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp CARET>;
            key-positions = <RT0 RM0>;
            COMBO_HOOK
        };
        // math operations
        combo_plus {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp PLUS>;
            key-positions = <RT1 RM1>;
            COMBO_HOOK
        };
        combo_minus {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp MINUS>;
            key-positions = <RM1 RB1>;
            COMBO_HOOK
        };
        combo_asterisk {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp ASTERISK>;
            key-positions = <RT2 RM2>;
            COMBO_HOOK
        };
        combo_slash {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp SLASH>;
            key-positions = <RM2 RB2>;
            COMBO_HOOK
        };
        // rest of symbols
        combo_amps {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp AMPS>;
            key-positions = <RT3 RM3>;
            COMBO_HOOK
        };

        combo_under {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp UNDER>;
            key-positions = <RM0 RB0>;
            COMBO_HOOK
        };
        combo_pipe {
            timeout-ms = <COMBO_TERM_SLOW>;
            bindings = <&kp PIPE>;
            key-positions = <RM3 RB3>;
            COMBO_HOOK
        };

        // parentheses
        combo_lpar {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&hmr_lpar_lt RS(LCTRL) 0>;
            key-positions = <RM1 RM2>;
            layers = <BASE NUMPAD>;
            COMBO_HOOK
        };
        combo_rpar {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&hmr_rpar_gt LA(LCTRL) 0>;
            key-positions = <RM2 RM3>;
            layers = <BASE NUMPAD>;
            COMBO_HOOK
        };
        combo_lt {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&kp LT>;
            key-positions = <RM1 RM2>;
            layers = <NAVI>;
            COMBO_HOOK
        };
        combo_gt {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&kp GT>;
            key-positions = <RM2 RM3>;
            layers = <NAVI>;
            COMBO_HOOK
        };
        combo_lbkt {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&kp LBKT>;
            key-positions = <RB1 RB2>;
            layers = <BASE NUMPAD>;
            COMBO_HOOK
        };
        combo_rbkt {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&kp RBKT>;
            key-positions = <RB2 RB3>;
            layers = <BASE NUMPAD>;
            COMBO_HOOK
        };
        combo_lbrc {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&kp LBRC>;
            key-positions = <RB1 RB2>;
            layers = <NAVI>;
            COMBO_HOOK
        };
        combo_rbrc {
            timeout-ms = <COMBO_TERM_FAST>;
            bindings = <&kp RBRC>;
            key-positions = <RB2 RB3>;
            layers = <NAVI>;
            COMBO_HOOK
        };
    };
};